<domain type="kvm">
 <name>stateless-example-miniguest</name>
 <metadata>
  <libosinfo:libosinfo xmlns:libosinfo="http://libosinfo.org/xmlns/libvirt/domain/1.0">
   <libosinfo:os id="http://nixos.org/nixos/unstable"/>
  </libosinfo:libosinfo>
 </metadata>
 <os>
  <type>hvm</type>
  <kernel>/etc/miniguests/stateless/kernel</kernel>
  <initrd>/etc/miniguests/stateless/initrd</initrd>
  <cmdline>console=ttyS0</cmdline>
 </os>
 <memory unit="GiB">1</memory>
 <devices>
  <serial type="pty"/>
  <filesystem type="mount" accessmode="squash">
   <source dir="/nix/store"/>
   <target dir="nix-store"/>
   <readonly/>
  </filesystem>
  <filesystem type="mount" accessmode="squash">
   <source dir="/etc/miniguests/stateless/boot"/>
   <target dir="boot"/>
   <readonly/>
  </filesystem>
 </devices>
</domain>
